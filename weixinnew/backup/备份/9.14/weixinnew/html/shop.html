<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>产品中心</title>
		<link rel="stylesheet" href="../css/index.css" />
		<link rel="stylesheet" href="../css/changeM.css" />
		<link rel="stylesheet" href="../css/style.css" />
	</head>

	<body>
		<div class="header">
			<input type="text" />
		</div>
		<div id="wrapper">
			<div class="scroller">
				<ul>
					<li>
						<div class="li_top">
							<img src="../img/content.png" />
						</div>
						<div class="li_bottom">温控仪</div>
					</li>
					<li>
						<div class="li_top">
							<img src="../img/content.png" />
						</div>
						<div class="li_bottom">温控仪</div>
					</li>
					<li>
						<div class="li_top">
							<img src="../img/content.png" />
						</div>
						<div class="li_bottom">温控仪</div>
					</li>
					<li>
						<div class="li_top">
							<img src="../img/content.png" />
						</div>
						<div class="li_bottom">温控仪</div>
					</li>
				</ul>
				<div class="clear"></div>
				<div class="more"><i class="pull_icon"></i><span>上拉加载...</span></div>
			</div>
		</div>
		<div class="footer">
			<a href="../index.html">
				<img src="../img/index.png" alt="" />
				<span>首页</span>
			</a>
			<a class="choosed" href="shop.html">
				<img src="../img/dingdan01.png" alt="" />
				<span>产品中心</span>
			</a>
			<a href="shop_car.html">
				<img src="../img/machine.png" alt="" />
				<span>购物车</span>
			</a>
			<a href="user.html">
				<img src="../img/user_di.png" alt="" />
				<span>用户信息</span>
			</a>
		</div>
		<script src="../js/jquery-1.11.0.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/iscroll.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			var myscroll = new iScroll("wrapper", {
				onScrollMove: function() {
					if(this.y < (this.maxScrollY)) {
						$('.pull_icon').addClass('flip');
						$('.pull_icon').removeClass('loading');
						$('.more span').text('释放加载...');
					} else {
						$('.pull_icon').removeClass('flip loading');
						$('.more span').text('上拉加载...')
					}
				},
				onScrollEnd: function() {
					if($('.pull_icon').hasClass('flip')) {
						$('.pull_icon').addClass('loading');
						$('.more span').text('加载中...');
						pullUpAction();
					}
				},
				onRefresh: function() {
					$('.more').removeClass('flip');
					$('.more span').text('上拉加载...');
				}
			});

			function pullUpAction() {
				console.log($('.scroller ul li').length)
				if($('.scroller ul li').length > 50) {
					$('.more').html("没有更多数据了...").css({
						color: '#000'
					});
					return;
				} else {
					setTimeout(function() {
						for(var i = 0; i < 5; i++) {
							$('.scroller ul').append("<li><div class = \"li_top\"><img src = \"../img/content.png\" /></div><div class = \"li_bottom\">U盘记录仪</div></li>");
						}
						myscroll.refresh();
					}, 10)
				};
			};
		</script>
	</body>

</html>