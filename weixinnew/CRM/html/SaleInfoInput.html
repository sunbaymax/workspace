<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>信息录入</title>
		<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
		<meta content="yes" name="apple-mobile-web-app-capable" />
		<meta content="black" name="apple-mobile-web-app-status-bar-style" />
		<meta content="telephone=no" name="format-detection" />
		<link rel="stylesheet" href="../css/reset.css" type="text/css">
		<link rel="stylesheet" href="../css/toastr.min.css" type="text/css">
		<link rel="stylesheet" href="../css/MarketInput.css" type="text/css" />
		<link rel="stylesheet" href="../css/ydui.css" type="text/css">
	</head>

	<body>
		<div class="container">
			<div class="top">
				<div class="top-inner">
					<a class="top-left"> <img src="../img/xinxiluru2.png" class="xinxiluru-img" /> <label class="xinxiwen">信息录入</label></a>
					<a class="top-right" href="VisitObj.html">
						<!--<img src="../img/jutiduixiang.png" class="jutiduixiang-img" />--><label class="visitobjwen">拜访对象</label></a>
				</div>

			</div>
			<div class="content-input">
				<ul class="inner-input">
					<li class="content-item">
						<div class="fristline">
							<p class="content-item-left">
								<img src="../img/hezuofangshi.png" class="li-img" />
							</p>
							<p class="content-item-right cooperation-click">
								<span class="input-wen">合作方式</span>
								<span class="hezuotxt"></span>
								<img src="../img/xiala_1.png" class="drop-down" />
							</p>
						</div>
					</li>
					<li class="content-item">
						<div class="fristline">
							<p class="content-item-left">
								<img src="../img/gongsi.png" class="li-img" />
							</p>
							<p class="content-item-right" style="position: relative;">
								<span class="input-wen">公司</span>
								<input type="text" class="CompanyInput" id="txt1" />
								<div id="div_items">
									<!--<div class="div_item">周杰伦</div>-->

								</div>
							</p>
						</div>
						<div class="lastline">
							<p class="last-inter-left" style="position: relative;">
								<span>部门</span><input type="text" class="standard-sm-input" id="txt2" />
								<div id="div_dept_items">
									<!--<div class="div_item2">周杰伦</div>-->

								</div>
							</p>
							<p class="last-inter-right">
								<span>职务</span><input type="text" class="standard-sm-input" id="duties" />
							</p>
						</div>
					</li>
					<li class="content-item">
						<div class="fristline">
							<p class="content-item-left">
								<img src="../img/ren1.png" class="li-img" />
							</p>
							<p class="content-item-right">
								<span class="input-wen">联系人</span>
								<input type="text" class="CoopeTypeInput" id="username" />
							</p>
						</div>
					</li>
					<li class="content-item">
						<div class="fristline">
							<div class="content-item-left">
								<img src="../img/shoujihao2.png" class="li-img" />
							</div>
							<div class="content-item-tel-right" style="border: none;">
								<p class="item-tel-left">
									<span class="telwen">手机</span>
									<input type="text" class="tel-standard" id="telphone" />
								</p>
								<p class="item-tel-right">
									<span class="telwen">座机</span>
									<input type="text" class="tel-standard" id="Mobile" />
								</p>

							</div>
						</div>
					</li>
					<li class="content-item">
						<div class="fristline">
							<p class="content-item-left">
								<img src="../img/chengshi.png" class="li-img" />
							</p>
							<p class="content-item-right">
								<span class="input-wen">城市/区域</span>
								<!--<input type="text" class="CoopeTypeInput" />-->
								<span class="address" id="J_Address"></span>
								<!--<img src="../img/xiala_1.png" class="drop-down" />-->
							</p>
						</div>
					</li>
					<li class="content-item">
						<div class="fristline">
							<p class="content-item-left">
								<img src="../img/quyu.png" class="li-img" />
							</p>
							<p class="content-item-right getaddress">
								<span class="input-wen">详细地址</span>
								<input type="text" class="CoopeTypeInput" id="descaddress" />
							</p>
						</div>
					</li>
					<li class="content-item">
						<div class="fristline">
							<p class="content-item-left">
								<img src="../img/hangyeleixing.png" class="li-img" />
							</p>
							<p class="content-item-right IndustryType-click">
								<span class="input-wen">行业类型</span>
								<!--<input type="text" class="CoopeTypeInput" />-->
								<span class="IndustTxt"></span>
								<img src="../img/xiala_1.png" class="drop-down" />
							</p>
						</div>
					</li>
					<li class="content-item">
						<div class="fristline">
							<p class="content-item-left">
								<img src="../img/huodetujing.png" class="li-img" />
							</p>
							<p class="content-item-right cooperationway-click">
								<span class="input-wen">获得途径</span>
								<!--<input type="text" class="CoopeTypeInput" />-->
								<span class="cpwaytxt"></span>
								<img src="../img/xiala_1.png" class="drop-down" />
							</p>
						</div>
					</li>

					<li class="content-item Exhibition">
						<div class="fristline">
							<p class="content-item-left">
								<img src="../img/zhanhuimingcheng.png" class="li-img" />
							</p>
							<p class="content-item-right">
								<span class="input-wen">展会名称</span>
								<!--<input type="text" class="CoopeTypeInput" id="Exhibitiontxt" />-->
								<select class="CoopeTypeInput" id="Exhibitiontxt">
									<!-- <option>2019DIA china 中国国际药物信息大会暨DIA中国年会（5.21-5.23）</option>-->
								</select>
							</p>
						</div>
					</li>
					<li class="content-item Explainbody">
						<p class="Explain">
							<textarea placeholder="【特殊说明】" id="Notes"></textarea>
						</p>
					</li>
					<li class="content-item-last" style="left: 0;">
						<button class="btn_ok">确认</button>
			</div>
			</ul>

		</div>
		<div class="setbg hide">
			<div class="yin"></div>
			<!-- 所需容积 -->
			<div class="cooperation hide cptype">
				<div class="cooperation-top"><span>合作方式</span> </div>
				<div class="cooperation-type"><span class="ni">冷链运输</span><span class="ni">产品租赁</span><span class="ni">产品销售</span></div>
				<div class="nextNum" style="cursor: pointer;">
					<button class="cooperation-btn cooperationType-btn">确定</button>
				</div>
			</div>

			<div class="cooperation hide cpway">
				<div class="cooperation-top"><span>获得途径</span> </div>
				<div class="cooperation-Ways">
					<span class="ni">客户介绍</span><span class="ni">朋友介绍</span><span class="ni">400</span>
					<span class="ni">百度推广</span><span class="ni">竞争对手信息</span><span class="ni">市场部提供</span>
					<span class="ni">展会</span>
				</div>
				<div class="nextNum" style="cursor: pointer;">
					<button class="cooperation-btn cooperationWays-btn">确定</button>
				</div>
			</div>

			<div class="cooperation hide IndustryType">
				<div class="cooperation-top"><span>行业类型</span>
					<!-- <img src="../img/delete.png" class="closewindow" />--></div>
				<div class="IndustryType-Ways">
					<span class="ni">临床临检</span><span class="ni">医疗器械</span><span class="ni">生物制药</span>
					<span class="ni" style="width: 140px;">经销商和第三方物流</span>
				</div>
				<div class="nextNum" style="cursor: pointer;">
					<button class="cooperation-btn IndustryType-btn">确定</button>
				</div>
			</div>

		</div>

		</div>
	</body>
	<script src="../js/jquery-1.11.0.js"></script>
	<script src="../js/toastr.min.js" type="text/javascript"></script>
	<script src="../js/index.js" type="text/javascript"></script>
	<!--<script src="../js/ydui.flexible.js" type="text/javascript"></script>-->
	<script type="text/javascript" src="../js/ydui.citys.js"></script>
	<script type="text/javascript" src="../js/ydui.js"></script>
	<script>
		$(document).ready(function() {
			var ScreenWidth = document.documentElement.clientWidth || document.body.clientWidth;
			var ScreenHeight = document.documentElement.clientHeight || document.body.clientHeight;
			document.documentElement.style.fontSize = document.documentElement.clientWidth / 10 + "px";

			function UrlSearch() {
				var name, value;
				var str = location.href; //取得整个地址栏
				var num = str.indexOf("?")
				str = str.substr(num + 1); //取得所有参数   stringvar.substr(start [, length ]
				var arr = str.split("&"); //各个参数放到数组里
				for(var i = 0; i < arr.length; i++) {
					num = arr[i].indexOf("=");
					if(num > 0) {
						name = arr[i].substring(0, num);
						value = arr[i].substr(num + 1);
						this[name] = value;
					}
				}
			}
			var Request = new UrlSearch(); //实例化
			if(Request.ID) {
				var companyid = Request.ID;
				$(".xinxiwen").text("信息修改");
				$(".btn_ok").css({
					'background-color': '#12599B',
					"color": "#ffffff"
				});
				$(".btn_ok").addClass('btn_edit');
				//$(".Explainbody").addClass('hide');
				$(".cooperation-click").addClass('moclick');
				$(".cooperation-click .hezuotxt").css('color', "#999999");
				$("#txt1").attr("readonly", "readonly");
				$("#txt2").attr("readonly", "readonly");
				$('#txt1').attr("disabled", true);
				$('#txt2').attr("disabled", true);
				$("#div_dept_items").css('display', 'none');
				$("#div_items").css('display', 'none');

				$.ajax({
					type: "post",
					url: "http://out.ccsc58.cc/DATA_PORT_CRM_1.01/TargetEdit.php",
					async: true,
					data: {
						State: "show",
						ID: companyid
					},
					dataType: "json",
					success: function(res) {
						$('.hezuotxt').text(res.data[0].CompanyType);
						$('.CompanyInput').val(res.data[0].Company);
						$('#txt2').val(res.data[0].DepartMent);
						$('#duties').val(res.data[0].ZW);
						$('#username').val(res.data[0].Manager);
						$('#telphone').val(res.data[0].Telephone);
						$('#Mobile').val(res.data[0].Mobile);
						$('#J_Address').text(res.data[0].Depart + ' ' + res.data[0].City + ' ' + res.data[0].Area);
						$('#descaddress').val(res.data[0].Address);
						$('.cpwaytxt').text(res.data[0].GetType);
						$('.IndustTxt').text(res.data[0].CType);
						$('#Notes').val(res.data[0].CargoNote);
						if(res.data[0].GetType == '展会') {
							$(".Exhibition").show();
							$(".Exhibition .input-wen").css({
								"color": "#666666"
							})
							$(".Exhibition .li-img").attr("src", "../img/zhanhuimingcheng.png")
							$(".Exhibition input").attr("disabled", false);
						} else {
							$(".Exhibition").show();
							$(".Exhibition .input-wen").css({
								"color": "#999999"
							})
							$(".Exhibition .li-img").attr("src", "../img/nozhanhui.png")
							$(".Exhibition input").attr("disabled", true);
						}

						$(".cpway .cooperation-Ways .ni").each(function() {
							if($(this).text() == res.data[0].GetType) {
								$(this).addClass('spanActive')
							}
						});
						$(".IndustryType .IndustryType-Ways .ni").each(function() {
							if($(this).text() == res.data[0].CType) {
								$(this).addClass('spanActive')
							}
						});

					},
					error: function(err) {

					}
				});
			} else {
				$(".xinxiwen").text("信息录入");
				$(".btn_ok").addClass('btn_add').removeClass('btn_edit');

			}

			$(".btn_add").on("click", function() {
				var Knight = localStorage.getItem('Knight')
				let _hezuotxt = $('.hezuotxt').text();
				let _company = $('.CompanyInput').val();
				let _DepartMent = $('#txt2').val();
				let inputAddress = $('#J_Address').text();
				let arraddress = inputAddress.split(' ');
				let _Depart = arraddress[0];
				let _City = arraddress[1];
				let _Area = '';
				let _Areaqu = '';
				if(_Depart == "北京" || _Depart == "上海" || _Depart == "重庆" || _Depart == "天津") {
					if(_City.indexOf('北京') != -1) {
						_City = '北京市';
						_Area = arraddress[2];
					} else if(_City.indexOf('上海') != -1) {
						_City = '上海市';
						_Area = arraddress[2];
					} else if(_City.indexOf('重庆') != -1) {
						_City = '重庆市';
						_Area = arraddress[2];
					} else if(_City.indexOf('天津') != -1) {
						_City = '天津市';
						_Area = arraddress[1];
					} else {
						_City = _Depart;
						_Area = arraddress[1];
						_Areaqu = arraddress[2];
					}
				} else {
					_City = arraddress[1];
					_Area = arraddress[2];
					_Areaqu = '';
				}
				let _Address = $('#descaddress').val();
				let _GetType = $('.cpwaytxt').text();
				let _CType = $('.IndustTxt').text();
				let _Manager = $('#username').val();
				let _note = $('#Notes').val();
				let _ZW = $('#duties').val();
				let _Telephone = $('#telphone').val();
				let _Mobile = $('#Mobile').val();
				var _Exhibitiontxt = '';
				if(_GetType == '展会') {
					_Exhibitiontxt = $('#Exhibitiontxt').val();
				} else {
					_Exhibitiontxt = '';
				}
				if(_hezuotxt == '' || _hezuotxt == null) {
					alert("请选择合作方式");
				} else if(_company == '' || _company.length == 0) {
					alert("请录入公司名称");
					$('#txt1').focus();
				} else if(_DepartMent == '' || _DepartMent.length == 0) {
					alert("请录入部门");
					$('#txt2').focus();
				} else if(_ZW == '' || _ZW.length == 0) {
					alert("请录入联系人职务");
					$('#duties').focus();
				} else if(_Manager == '' || _Manager.length == 0) {
					alert("请录入联系人姓名");
					$('#username').focus();
				} else if(_Telephone == '' && _Mobile.length == '') {
					alert("请录入手机号/座机号");
					$('#telphone').focus();
				} else if(_Telephone != '' && !isPoneAvailable($('#telphone'))) {
					alert("手机号格式不正确");
					$('#telphone').focus();
				} else if(inputAddress == '' || inputAddress.length == 0) {
					alert("请选择城市区域");
				} else if(_Address == '' || _Address.length == 0) {
					alert("请录入详细地址");
				} else if(_CType == '' || _CType.length == 0) {
					alert("请选择行业类型");
				} else if(_GetType == '' || _GetType.length == 0) {
					alert("请选择获得途径");
				} else if(_GetType == '展会' && _Exhibitiontxt == '') {
					alert("请输入展会名称");
				} else if(_note == '' || _note.length == 0) {
					alert("请输入特殊说明");
					$('#Notes').focus();
				} else {
					var _data = {
						State: "add",
						Company: _company,
						CompanyType: _hezuotxt,
						DepartMent: _DepartMent,
						Telephone: _Telephone,
						Mobile: _Mobile,
						SaleCode: Knight,
						Depart: _Depart,
						City: _City,
						Address: _Address,
						GetType: _GetType,
						CType: _CType,
						Manager: _Manager,
						ZW: _ZW,
						CargoNote: _note,
						GetNote: _Exhibitiontxt,
						Area: _Area
					};

					$.ajax({
						type: "post",
						url: "http://out.ccsc58.cc/DATA_PORT_CRM_1.01/MarketAdd.php",
						async: true,
						data: _data,
						dataType: "json",
						success: function(res) {
							console.log(res);
							if(res.code == "200") {
								alert("录入成功");
							} else {
								alert(res.msg);
								return false;
							}
						},
						error: function(err) {
							console.log(err)
						}
					});

				}

			})

			$(".btn_edit").on("click", function() {

				let _ID = Request.ID;
				let inputAddress = $('#J_Address').text();
				let arraddress = inputAddress.split(' ');
				let _Depart = arraddress[0];
				let _City = arraddress[1];
				let _note = $('#Notes').val();
				let _Area = '';
				let _Areaqu = '';
				if(_Depart == "北京" || _Depart == "上海" || _Depart == "重庆" || _Depart == "天津") {
					if(_City.indexOf('北京') != -1) {
						_City = '北京市';
						_Area = arraddress[2];
					} else if(_City.indexOf('上海') != -1) {
						_City = '上海市';
						_Area = arraddress[2];
					} else if(_City.indexOf('重庆') != -1) {
						_City = '重庆市';
						_Area = arraddress[2];
					} else if(_City.indexOf('天津') != -1) {
						_City = '天津市';
						_Area = arraddress[1];
					} else {
						_City = _Depart;
						_Area = arraddress[1];
						_Areaqu = arraddress[2];
					}
				} else {
					_City = arraddress[1];
					_Area = arraddress[2];
					_Areaqu = '';
				}
				let _Address = $('#descaddress').val();
				let _GetType = $('.cpwaytxt').text();
				let _CType = $('.IndustTxt').text();
				let _Manager = $('#username').val();
				let _ZW = $('#duties').val();
				let _Telephone = $('#telphone').val();
				let _Mobile = $('#Mobile').val();
				var _Exhibitiontxt = '';
				if(_GetType == '展会') {
					_Exhibitiontxt = $('#Exhibitiontxt').val();
				} else {
					_Exhibitiontxt = '';
				}

				if(_ZW == '' || _ZW.length == 0) {
					alert("请录入联系人职务");
					$('#duties').focus();
				} else if(_Manager == '' || _Manager.length == 0) {
					alert("请录入联系人姓名");
					$('#username').focus();
				} else if(_Telephone == '' && _Mobile.length == '') {
					alert("请录入手机号/座机号");
					$('#telphone').focus();
				} else if(_Telephone != '') {
					if(!isPoneAvailable($('#telphone'))) {
						alert("手机号格式不正确");
						$('#telphone').focus();
					}
				} else if(inputAddress == '' || inputAddress.length == 0) {
					alert("请选择城市区域");
				} else if(_Address == '' || _Address.length == 0) {
					alert("请录入详细地址");
				} else if(_GetType == '' || _GetType.length == 0) {
					alert("请选择获得途径");
				} else if(_CType == '' || _CType.length == 0) {
					alert("请选择行业类型");
				} else if(_GetType == '展会' && _Exhibitiontxt == '') {
					alert("请输入展会名称");
				} else if(_note == '' || _note.length == 0) {
					alert("请输入特殊说明");
					$('#Notes').focus();
				} else {
					var _data = {
						State: "edit",
						ID: _ID,
						Depart: _Depart,
						City: _City,
						Address: _Address,
						GetType: _GetType,
						CType: _CType,
						Manager: _Manager,
						ZW: _ZW,
						Area: _Area,
						Telephone: _Telephone,
						Mobile: _Mobile,
						CargoNote: _note,
						GetNote: _Exhibitiontxt
					};
					$.ajax({
						type: "post",
						url: "http://out.ccsc58.cc/DATA_PORT_CRM_1.01/TargetEdit.php",
						async: true,
						data: _data,
						dataType: "json",
						success: function(res) {
							console.log(res)
							if(res.code == "200") {
								alert("修改成功");
							} else {
								alert(res.msg);
								return false;
							}
						},
						error: function(err) {
							console.log(err)
						}
					});
				}

			})

			function isPoneAvailable($poneInput) {
				var myreg = /^[1][3,4,5,7,8][0-9]{9}$/;
				if(!myreg.test($poneInput.val())) {

					return false;
				} else {
					return true;
				}
			}

			function myalert(str) {
				var div = '<div class="mark"></div>';
				$('body').append(div)
				$('.mark').html(str);
				$('.mark').show();
				setTimeout(function() {
					$('.mark').hide();
					$('.mark').remove();
				}, 2000)
			}

			$(".yin").on('click', function() {
				$(".setbg").hide();

			})
			$(".closewindow").on('click', function() {
				$(".setbg").hide();
				$(".setbg").hide();

			})
			$(".cooperation-click").on('click', function() {
				$('body,html').animate({
					scrollTop: 0
				}, 0);
				$(".setbg").show();
				$(".cptype").show();
				$(".cpway").hide();
				$(".IndustryType").hide();

			})
			$(".cooperationway-click").on('click', function() {
				$('body,html').animate({
					scrollTop: 0
				}, 0);
				$(".setbg").show();
				$(".cptype").hide();
				$(".cpway").show();
				$(".IndustryType").hide();

			})
			$(".IndustryType-click").on('click', function() {
				$('body,html').animate({
					scrollTop: 0
				}, 0);
				$(".setbg").show();
				$(".cptype").hide();
				$(".cpway").hide();
				$(".IndustryType").show();

			})
			$(".cooperation-type .ni").on('click', function() {
				$(this).addClass('spanActive').siblings().removeClass('spanActive');

			});
			$(".cooperation-Ways .ni").on('click', function() {
				$(this).addClass('spanActive').siblings().removeClass('spanActive');
			});
			$(".IndustryType-Ways .ni").on('click', function() {
				$(this).addClass('spanActive').siblings().removeClass('spanActive');
			});
			$(".cooperationType-btn").on('click', function() {
				//				$(this).addClass('spanActive').siblings().removeClass('spanActive');
				let cooperationTxt = $(".cooperation-type .spanActive").text();
				if(cooperationTxt == '' || cooperationTxt.length == 0) {
					alert('请选择合作方式');
				} else {
					$('.hezuotxt').text(cooperationTxt);
					$(".setbg").hide();
				}

			});
			$(".cooperationWays-btn").on('click', function() {
				let cooperationTxt = $(".cooperation-Ways .spanActive").text();
				if(cooperationTxt == '' || cooperationTxt.length == 0) {
					alert('请选择获得途径');
				} else {
					if(cooperationTxt == '展会') {
						$(".Exhibition").show();
						$(".Exhibition .input-wen").css({
							"color": "#666666"
						})
						$(".Exhibition .li-img").attr("src", "../img/zhanhuimingcheng.png")
						$(".Exhibition select").attr("disabled", false);
						$('#Exhibitiontxt').empty();
						$.ajax({
							type: "post",
							url: "http://out.ccsc58.cc/DATA_PORT_CRM_1.01/ShowMeet.php",
							async: true,
							data: "",
							dataType: "json",
							success: function(res) {
								let str = '';
								if(res.code == "200") {

									$.each(res.data, function(key, value) {
										console.log(value)
										if(key == 0) {
											str = ` <option value='请选择展会名称'>--请选择展会名称--</option>`;

										} else {
											str = ` <option value='${value}'>${value}</option>`;
										}
										$('#Exhibitiontxt').append(str);
									});
								}

							},
							error: function(err) {

							}
						});

					} else {
						$(".Exhibition").show();
						$(".Exhibition .input-wen").css({
							"color": "#999999"
						})
						$(".Exhibition .li-img").attr("src", "../img/nozhanhui.png")
						$(".Exhibition select").attr("disabled", true);
						$(".Exhibition select").val("");

					}
					$('.cpwaytxt').text(cooperationTxt);
					$(".setbg").hide();
				}

			});
			$(".IndustryType-btn").on('click', function() {
				let cooperationTxt = $(".IndustryType-Ways .spanActive").text();
				console.log(cooperationTxt)
				if(cooperationTxt == '' || cooperationTxt.length == 0) {
					alert('请选择行业类型');
				} else {
					$('.IndustTxt').text(cooperationTxt);
					$(".setbg").hide();
				}

			});

			//			$("#txt1").click(function() {
			//				$("#div_items").css('display', 'block');
			//				return false;
			//			});
			$("input").blur(function() {
				$('body,html').animate({
					scrollTop: 0
				}, 500);
			})
			$("textarea").blur(function() {
				$('body,html').animate({
					scrollTop: 0
				}, 500);
			})
			$("#txt1").bind('input propertychange', function() {
				let Knight = localStorage.getItem('Knight');
				$('#div_items').html("");
				$.ajax({
					type: "post",
					url: "http://out.ccsc58.cc/DATA_PORT_CRM_1.01/MarketAdd.php",
					async: true,
					data: {
						State: "company",
						company: $(this).val(),
						SaleCode: Knight
					},
					dataType: "json",
					success: function(res) {
						console.log(res)
						let str = '';
						$('#div_items').html('');
						if(res.code == "200") {
							$.each(res.data, function(key, value) {
								str = `<div class="div_item">${value.Company}</div>`;
								$('#div_items').append(str);
							});
						}

					},
					error: function(err) {

					}
				});
			});
			$("#txt1").blur(function() {
				$('#div_items').hide();
			})
			$("#txt2").blur(function() {
				$('#div_dept_items').hide();
			})
			$("#txt2").bind('input propertychange', function() {
				let Knight = localStorage.getItem('Knight');
				$('#div_dept_items').html('');
				$.ajax({
					type: "post",
					url: "http://out.ccsc58.cc/DATA_PORT_CRM_1.01/MarketAdd.php",
					async: true,
					data: {
						State: "DepartMent",
						DepartMent: $(this).val(),
						SaleCode: Knight
					},
					dataType: "json",
					success: function(res) {
						console.log(res)
						let str = '';
						if(res.code == "200") {
							$('#div_dept_items').html('');
							$.each(res.data, function(key, value) {
								str = `<div class="div_item2">${value.DepartMent}</div>`;
								$('#div_dept_items').append(str);
							});
						}

					},
					error: function(err) {

					}
				});
			});
			//			$("#txt2").click(function() {
			//				$("#div_dept_items").css('display', 'block');
			//				return false;
			//			});

			//隐藏列表框
			$("body").click(function() {
				$("#div_items").css('display', 'none');
				$("#div_dept_items").css('display', 'none');
			});

			//移入移出效果
			$(".div_item").hover(function() {
				$(this).css('background-color', '#1C86EE').css('color', 'white');
			}, function() {
				$(this).css('background-color', 'white').css('color', 'black');
			});
			$(".div_dept_items").hover(function() {
				$(this).css('background-color', '#1C86EE').css('color', 'white');
			}, function() {
				$(this).css('background-color', 'white').css('color', 'black');
			});

			//文本框输入
			$("#txt1").keyup(function() {
				if($(this).val() == '') {
					$("#div_items").css('display', 'none'); //只要输入就显示列表框
				} else {
					$("#div_items").css('display', 'block'); //只要输入就显示列表框	
				}

				if($("#txt1").val().length <= 0) {
					$(".div_item").css('display', 'block'); //如果什么都没填，跳出，保持全部显示状态
					return;
				}

				$(".div_item").css('display', 'none'); //如果填了，先将所有的选项隐藏

				for(var i = 0; i < $(".div_item").length; i++) {
					//模糊匹配，将所有匹配项显示
					if($(".div_item").eq(i).text().substr(0, $("#txt1").val().length) == $("#txt1").val()) {
						$(".div_item").eq(i).css('display', 'block');
					}
				}
			});
			$("#txt1").focus(function() {
				$("#div_dept_items").fadeOut(); //只要输入就显示列表框

			});
			$("#txt2").focus(function() {
				$("#div_items").fadeOut(); //只要输入就显示列表框

			});
			//文本框输入
			$("#txt2").keyup(function() {
				if($(this).val() == '') {
					$("#div_dept_items").css('display', 'none'); //只要输入就显示列表框
				} else {
					$("#div_dept_items").css('display', 'block'); //只要输入就显示列表框
				}
				if($("#txt2").val().length <= 0) {
					$(".div_item2").css('display', 'block'); //如果什么都没填，跳出，保持全部显示状态
					return;
				}

				$(".div_item2").css('display', 'none'); //如果填了，先将所有的选项隐藏

				for(var i = 0; i < $(".div_item2").length; i++) {
					//模糊匹配，将所有匹配项显示
					if($(".div_item2").eq(i).text().substr(0, $("#txt2").val().length) == $("#txt2").val()) {
						$(".div_item2").eq(i).css('display', 'block');
					}
				}
			});
			//项点击
			$("body").on("click", ".div_item", function() {
				$("#txt1").val($(this).text());
			});
			$("body").on("click", ".div_item2", function() {
				$("#txt2").val($(this).text());
			});

			! function() {
				var $target = $('#J_Address');

				$target.citySelect();

				$target.on('click', function(event) {
					event.stopPropagation();
					$target.citySelect('open');
				});
				$('html , body').animate({
					scrollTop: 0
				}, 'slow');

				$target.on('done.ydui.cityselect', function(ret) {
					$(this).text(ret.provance + ' ' + ret.city + ' ' + ret.area);
				});
			}();
			$(".getaddress").click(function() {

			});

		})
	</script>

</html>